<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Terminal Admin | STACKFORM</title>
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@900&family=Inter:wght@400;600;800&display=swap" rel="stylesheet">
    <style>
        :root {
            --bg: #050505;
            --panel: #0a0a0a;
            --accent: #2F6BFF;
            --text-dim: rgba(255,255,255,0.4);
            --border: rgba(255,255,255,0.08);
            --success: #00ff88;
        }

        * { margin: 0; padding: 0; box-sizing: border-box; font-family: 'Inter', sans-serif; }
        body { background: var(--bg); color: #fff; overflow-x: hidden; }

        /* LOGIN GATE */
        #loginGate {
            position: fixed; inset: 0; background: var(--bg); z-index: 9999;
            display: flex; align-items: center; justify-content: center;
        }
        .login-card { 
            background: var(--panel); padding: 40px; border: 1px solid var(--border); 
            border-radius: 20px; width: 100%; max-width: 400px; text-align: center; 
        }
        .login-card h2 { font-family: 'Montserrat'; font-size: 1.2rem; letter-spacing: 2px; margin-bottom: 30px; }
        input { 
            width: 100%; padding: 15px; background: rgba(255,255,255,0.03); 
            border: 1px solid var(--border); border-radius: 8px; color: #fff; 
            margin-bottom: 10px; outline: none; transition: 0.3s;
        }
        input:focus { border-color: var(--accent); }
        .auth-btn { 
            width: 100%; padding: 15px; background: var(--accent); color: #fff; 
            border: none; border-radius: 8px; font-weight: 800; cursor: pointer; 
        }

        /* DASHBOARD LAYOUT */
        #adminDashboard { display: none; padding: 40px 5%; }
        header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 40px; }
        .logo-area h1 { font-family: 'Montserrat'; font-size: 1rem; letter-spacing: 4px; color: var(--text-dim); }
        
        .stats-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 20px; margin-bottom: 40px; }
        .stat-card { background: var(--panel); border: 1px solid var(--border); padding: 25px; border-radius: 16px; }
        .stat-card label { font-size: 0.6rem; font-weight: 800; color: var(--text-dim); text-transform: uppercase; letter-spacing: 2px; }
        .stat-card .val { font-size: 1.8rem; font-weight: 800; margin-top: 10px; font-family: 'Montserrat'; }

        .main-content { display: grid; grid-template-columns: 1fr 300px; gap: 30px; }

        /* INQUIRY LIST */
        .inquiry-list { display: flex; flex-direction: column; gap: 15px; }
        .inquiry-card { 
            background: var(--panel); border: 1px solid var(--border); 
            padding: 25px; border-radius: 16px; position: relative;
            transition: 0.3s;
        }
        .inquiry-card:hover { border-color: rgba(255,255,255,0.2); }
        .inquiry-header { display: flex; justify-content: space-between; margin-bottom: 15px; }
        .tag { font-size: 0.55rem; font-weight: 900; padding: 4px 8px; border-radius: 4px; background: var(--accent); }
        .timestamp { font-size: 0.7rem; color: var(--text-dim); }
        .client-info h3 { font-size: 1.1rem; margin-bottom: 5px; }
        .client-info p { font-size: 0.8rem; color: var(--text-dim); }
        .message-body { margin-top: 15px; font-size: 0.9rem; line-height: 1.6; color: rgba(255,255,255,0.8); }

        /* CONTROLS */
        .sidebar { display: flex; flex-direction: column; gap: 20px; }
        .ctrl-box { background: var(--panel); border: 1px solid var(--border); padding: 20px; border-radius: 16px; }
        .ctrl-box h4 { font-size: 0.7rem; margin-bottom: 15px; color: var(--text-dim); text-transform: uppercase; }
        
        .m-btn { 
            width: 100%; padding: 12px; border-radius: 8px; border: 1px solid var(--border);
            cursor: pointer; font-weight: 800; font-size: 0.7rem; transition: 0.3s;
        }
        .m-btn.active { background: #ff4b4b; border-color: #ff4b4b; color: #fff; }
        .m-btn.inactive { background: var(--success); color: #000; }

        @media (max-width: 900px) {
            .main-content { grid-template-columns: 1fr; }
        }
    </style>
</head>
<body>

    <div id="loginGate">
        <div class="login-card">
            <h2>ADMIN_ACCESS</h2>
            <input type="text" id="userIn" placeholder="USERNAME">
            <input type="password" id="keyIn" placeholder="ACCESS_KEY">
            <button class="auth-btn" onclick="authenticate()">INITIALIZE</button>
        </div>
    </div>

    <div id="adminDashboard">
        <header>
            <div class="logo-area"><h1>STACKFORM_CORE_v1</h1></div>
            <button onclick="location.reload()" style="background:none; border:none; color:var(--accent); cursor:pointer; font-weight:800; font-size:0.7rem;">REFRESH_FEED</button>
        </header>

        <div class="stats-grid">
            <div class="stat-card"><label>Total Inquiries</label><div class="val" id="totalInq">0</div></div>
            <div class="stat-card"><label>Service Lead</label><div class="val" id="topService">N/A</div></div>
            <div class="stat-card"><label>System Status</label><div class="val" id="sysStatus" style="color:var(--success)">ONLINE</div></div>
        </div>

        <div class="main-content">
            <div class="inquiry-list" id="inquiryContainer">
                </div>

            <div class="sidebar">
                <div class="ctrl-box">
                    <h4>System Configuration</h4>
                    <button id="maintBtn" class="m-btn" onclick="toggleMaint()">LOADING...</button>
                    <p style="font-size:0.6rem; color:var(--text-dim); margin-top:10px;">Toggle Global Maintenance Redirect</p>
                </div>
                
                <div class="ctrl-box">
                    <h4>Data Management</h4>
                    <button onclick="clearLogs()" style="width:100%; background:none; border:1px solid #333; color:#666; padding:10px; font-size:0.6rem; font-weight:800; cursor:pointer;">PURGE ALL LOGS</button>
                </div>
            </div>
        </div>
    </div>

    <script>
        function authenticate() {
            const u = document.getElementById('userIn').value;
            const k = document.getElementById('keyIn').value;
            if(u === 'stackformdev' && k === '3478') {
                document.getElementById('loginGate').style.display = 'none';
                document.getElementById('adminDashboard').style.display = 'block';
                renderDashboard();
            } else {
                alert('ACCESS_DENIED');
            }
        }

        function renderDashboard() {
            const data = JSON.parse(localStorage.getItem('site_inquiries') || '[]');
            const container = document.getElementById('inquiryContainer');
            
            // Update Stats
            document.getElementById('totalInq').innerText = data.length;
            
            // Calculate Top Service
            if(data.length > 0) {
                const counts = data.reduce((acc, curr) => {
                    acc[curr.service] = (acc[curr.service] || 0) + 1;
                    return acc;
                }, {});
                const top = Object.keys(counts).reduce((a, b) => counts[a] > counts[b] ? a : b);
                document.getElementById('topService').innerText = top;
            }

            // Render List
            if(data.length === 0) {
                container.innerHTML = `<div class="stat-card" style="text-align:center; color:var(--text-dim)">NO DATA RECEIVED YET</div>`;
            } else {
                container.innerHTML = data.map(iq => `
                    <div class="inquiry-card">
                        <div class="inquiry-header">
                            <span class="tag">${iq.service}</span>
                            <span class="timestamp">${iq.date}</span>
                        </div>
                        <div class="client-info">
                            <h3>${iq.name}</h3>
                            <p>${iq.email} â€¢ ${iq.phone}</p>
                        </div>
                        <div class="message-body">${iq.message}</div>
                        <div style="margin-top:15px; font-size:0.6rem; color:var(--accent); font-weight:800;">ID: ${iq.id}</div>
                    </div>
                `).join('');
            }
            updateMaintUI();
        }

        function toggleMaint() {
            const state = localStorage.getItem('maintenanceMode') === 'true';
            localStorage.setItem('maintenanceMode', !state);
            updateMaintUI();
        }

        function updateMaintUI() {
            const state = localStorage.getItem('maintenanceMode') === 'true';
            const btn = document.getElementById('maintBtn');
            btn.innerText = state ? 'MAINTENANCE: ACTIVE' : 'MAINTENANCE: INACTIVE';
            btn.className = state ? 'm-btn active' : 'm-btn inactive';
        }

        function clearLogs() {
            if(confirm('PERMANENTLY DELETE ALL RECORDS?')) {
                localStorage.setItem('site_inquiries', '[]');
                renderDashboard();
            }
        }
    </script>
</body>
</html>